Модуль Sshell

Классы:
 - Sshell
 - CmdManager
 - CollectCmds
 
Структуры:
 - DataCmd
 
Интерфейсы:
 - IPgComponent



Структура DataCmd
Содержит информацию о комманде.

Поля:
std::string name;
Название команды. По этому названию будет происходить вызов программы.

std::string desc;
Описание команды. Необходимо для вывода в списке комманд.



Класс CollectCmds
Коллекция структур DataCmd

Поля:
void add(DataCmd * data);
Добавить структуру DataCmd в коллекцию.

DataCmd * get(size_t idx);
Получить структуру DataCmd по индексу.

size_t size();
Количество элментов в коллекции.

void next(size_t idx);
Установить значение индекса с которого начнется получение структур DataCmd в методе next.

DataProg * next();
Получить структуру DataCmd и перейти к следующей.



Интерфейса IPgComponent
Этот интерфейс реализуют все классы, в которых методы необходимо вызвать через Sshell.

virtual std::string * getName() = 0;
Возвращает указатель на название программного компонента. Необходимо для отображения в списке команд.

virtual std::string * getDesc() = 0;
Возвращает указатель на описание программного компонента. Необходимо для отображения в списке команд.

virtual CollectCmds * cmds() = 0;
Возвращает ссылку на объект CollectCmds, содержащий информацию о командах. Необходим для построения списка команд, и передачи команды для вызова в метод execute.

virtual bool execute(int argc, char * argv[], string & res) = 0;
Выполняет действия для полученных аргументов. Агументы содержат команду и параметры команды. В res записывается результат команды.



Класс Sshell
Задача класса считать параметры из командной строки и передать команду для соответствующего класса реализующий интерфейс IPgComponent.

Поля:
IPgComponent * cmps;
Переменная хранит список всех компонент.

void addComponent(IPgComponent * cmp);
Добавить компонент.

IPgComponent * detectCmpByCmdName(std::string cmd);
По названию команды найти компонент в котором это команда объявлена.

bool existsCmd(IPgComponent * cmp, std::string cmd);
Существует ли введенная команда в указанном компоненте.

void listen();
Осуществляет прослушку ввода команд и передает команды в объект типа IPgComponent.

void prepair();
Считывает комманды из всех компонентов.



Вызов методов внутри класса Sshell

В объекте класса хранится массив, его елементы содержать следующую информации:
 - имя команды;
 - указатель на метод объекта, реализующий интерфейс PgComponent;
 - указатель на экземпляр класса, реализующий интерфейс PgComponent;

Для указанной команды вызывается метод:
    std::string (*Class->*method)(int argc, char * argv[]);




